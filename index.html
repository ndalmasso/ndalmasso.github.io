<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Nicolò Dalmasso</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;1,400&family=Inconsolata:wght@300;400&display=swap" rel="stylesheet" />
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --font-s: 'Playfair Display', serif;
      --font-m: 'Inconsolata', monospace;
    }

    /* ── DARK THEME (default) ── */
    [data-theme="dark"] {
      --bg:          #16120e;
      --bg2:         #1c1710;
      --sand:        #e8dcc8;
      --sand-dim:    rgba(232,220,200,0.42);
      --sand-faint:  rgba(232,220,200,0.12);
      --rust:        #d67134;
      --rust-dim:    rgba(214, 113, 52, 0.5);
      --charcoal:    #2e2920;
      --border:      #282420;
    }

    /* ── LIGHT THEME ── */
    [data-theme="light"] {
      --bg:          #f2ece0;
      --bg2:         #e8e0d0;
      --sand:        #1c1209;
      --sand-dim:    rgba(28,18,9,0.68);
      --sand-faint:  rgba(28,18,9,0.10);
      --rust:        #a84a10;
      --rust-dim:    rgba(168, 74, 16, 0.35);
      --charcoal:    #d8cfbe;
      --border:      #c8bfab;
    }

    html { scroll-behavior: smooth; font-size: 110%; overflow-x: hidden; }

    body {
      background: var(--bg);
      color: var(--sand);
      font-family: var(--font-m);
      font-size: 1rem;
      font-weight: 300;
      line-height: 1.8;
      overflow-x: hidden;
      transition: background 0.4s ease, color 0.4s ease;
    }
    [data-theme="light"] body,
    [data-theme="light"] .tl-note,
    [data-theme="light"] .about-right p,
    [data-theme="light"] .contact-left p { font-weight: 400; }

    @media (pointer: fine) {
      body { cursor: none; }
      html, body { cursor: none; }
      a, button, [role="button"], input, textarea { cursor: none !important; }
    }

    @media (pointer: coarse) {
      body { cursor: auto; }
      a, button, [role="button"] { cursor: pointer; }
      input, textarea { cursor: text; }
      #cursor { display: none !important; }
    }

    .hero-eyebrow, .s-num, .about-label, .cv-group-title, .b-tag,
    .tl-date, .social-item span, .about-stat-label, .b-link {
      color: var(--rust);
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.25em;
      font-size: 0.75rem;
    }

    #cursor {
      position: fixed;
      width: 18px; height: 18px;
      border: 2px solid var(--rust);
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      transform: translate(-50%, -50%);
      transition: transform .15s ease-out, background .2s ease;
    }
    #cursor.cursor-hover {
      transform: translate(-50%, -50%) scale(1.8);
      background: var(--rust-dim);
    }
    #cursor::after {
      content: "";
      position: absolute;
      top: 50%; left: 50%;
      width: 4px; height: 4px;
      background: var(--rust);
      border-radius: 50%;
      transform: translate(-50%, -50%);
    }

    body::after {
      content:''; position:fixed; inset:0; pointer-events:none; z-index:9997;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='300' height='300'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='300' height='300' filter='url(%23n)' opacity='1'/%3E%3C/svg%3E");
    }
    [data-theme="dark"]  body::after { opacity: .035; }
    [data-theme="light"] body::after { opacity: .022; }

    section { position:relative; z-index:1; }
    .wrap { max-width:1200px; margin:0 auto; padding:0 clamp(2rem,5vw,5rem); }

    /* ── THEME TOGGLE ── */
    #themeToggle {
      position: fixed;
      top: 1.4rem;
      right: clamp(1.5rem, 5vw, 3rem);
      z-index: 9998;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--bg2);
      border: 1px solid var(--border);
      border-radius: 50%;
      transition: background 0.4s ease, border-color 0.4s ease, transform 0.2s ease;
      outline: none;
    }
    #themeToggle:hover {
      border-color: var(--rust);
      transform: scale(1.1);
    }

    /* Sun icon (shown in dark mode to switch to light) */
    #themeToggle .icon-sun,
    #themeToggle .icon-moon {
      position: absolute;
      width: 18px;
      height: 18px;
      transition: opacity 0.35s ease, transform 0.4s cubic-bezier(.16,1,.3,1);
    }

    [data-theme="dark"] #themeToggle .icon-sun  { opacity: 1; transform: rotate(0deg) scale(1); }
    [data-theme="dark"] #themeToggle .icon-moon { opacity: 0; transform: rotate(90deg) scale(0.6); }
    [data-theme="light"] #themeToggle .icon-sun  { opacity: 0; transform: rotate(-90deg) scale(0.6); }
    [data-theme="light"] #themeToggle .icon-moon { opacity: 1; transform: rotate(0deg) scale(1); }

    /* HERO */
    #hero { padding:clamp(6rem,15vh,12rem) 0 6rem; }
    .hero-inner { display:flex; align-items:center; justify-content:space-between; gap:4rem; }
    .hero-main { flex:1 1 0; min-width:0; }
    .hero-eyebrow { margin-bottom:2.5rem; opacity:0; animation:up .9s .2s cubic-bezier(.16,1,.3,1) forwards; word-break:break-word; overflow-wrap:break-word; }
    .hero-name { font-family:var(--font-s); font-size:clamp(4rem,10vw,9.5rem); font-weight:400; line-height:.85; color:var(--sand); opacity:0; animation:up .9s .35s cubic-bezier(.16,1,.3,1) forwards; }
    .hero-name span { display:block; font-style:italic; font-size:.72em; }
    [data-theme="dark"]  .hero-name span { color:rgba(232,220,200,.55); }
    [data-theme="light"] .hero-name span { color:rgba(28,18,9,0.45); }
    .hero-photo-wrap { flex:0 0 clamp(220px,32vw,450px); opacity:0; animation:up .9s .5s cubic-bezier(.16,1,.3,1) forwards; }
    .hero-photo { width:100%; border:1px solid var(--border); border-radius:3px; overflow:hidden; transition: border-color 0.4s ease; }
    .hero-photo img { width:100%; height:auto; display:block; }

    /* PROJECT MODAL */
    .proj-overlay {
      position:fixed; inset:0;
      background:rgba(22,18,14,.92);
      z-index:800;
      display:flex; align-items:center; justify-content:center;
      padding: max(env(safe-area-inset-top), 1rem) max(env(safe-area-inset-right), 1rem) max(env(safe-area-inset-bottom), 1rem) max(env(safe-area-inset-left), 1rem);
      opacity:0; pointer-events:none;
      transition:opacity .35s;
    }
    [data-theme="light"] .proj-overlay { background: rgba(200,190,175,.92); }
    .proj-overlay.active { opacity:1; pointer-events:all; }

    .proj-nav {
      position:absolute; top:50%; transform:translateY(-50%);
      width:48px; height:48px;
      background:var(--charcoal); border:1px solid var(--border); border-radius:50%;
      display:flex; align-items:center; justify-content:center;
      font-size:1.25rem; color:var(--sand-dim);
      transition:all .25s; z-index:10;
    }
    .proj-nav:hover { background:var(--rust); border-color:var(--rust); color:#fff; }
    .proj-nav:disabled { opacity:.18; pointer-events:none; }
    .proj-nav.prev { left:max(1.5rem, calc(50% - 390px - 72px)); }
    .proj-nav.next { right:max(1.5rem, calc(50% - 390px - 72px)); }

    .proj-modal {
      background:var(--bg2); border:1px solid var(--border); border-radius:4px;
      width:90%; max-width:780px;
      max-height:85vh; max-height:85dvh;
      overflow-y:auto; position:relative;
      transform:translateY(24px) scale(.98);
      transition:transform .4s cubic-bezier(.16,1,.3,1), background 0.4s ease;
      scrollbar-width:thin; scrollbar-color:var(--charcoal) transparent;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
    }
    .proj-overlay.active .proj-modal { transform:none; }

    .proj-modal-header {
      position:sticky; top:0; z-index:20;
      display:flex; justify-content:space-between; align-items:center;
      padding:.9rem 1.4rem;
      background:var(--bg2); border-bottom:1px solid var(--border);
      transition: background 0.4s ease, border-color 0.4s ease;
    }
    .proj-swipe-hint {
      display:none;
      font-size:.62rem; color:var(--sand-dim); letter-spacing:.15em;
      text-transform:uppercase; opacity:.6;
    }
    @media (pointer: coarse) { .proj-swipe-hint { display:block; } }

    .proj-counter { font-size:.68rem; color:var(--rust); font-weight:700; letter-spacing:.22em; text-transform:uppercase; }
    .proj-modal-close {
      width:36px; height:36px; border-radius:50%;
      background:var(--charcoal); border:1px solid var(--border);
      font-size:1rem; color:var(--sand-dim);
      display:flex; align-items:center; justify-content:center;
      transition:all .2s;
      min-width:44px; min-height:44px;
    }
    .proj-modal-close:hover { background:var(--rust); border-color:var(--rust); color:#fff; }

    .proj-modal-body { padding:2.8rem 3rem 3.5rem; }
    .proj-modal-tag { color:var(--rust); font-weight:700; text-transform:uppercase; letter-spacing:.25em; font-size:.7rem; margin-bottom:1rem; }
    .proj-modal-title { font-family:var(--font-s); font-size:clamp(1.6rem,3vw,2.4rem); color:var(--sand); line-height:1.15; margin-bottom:.5rem; }
    .proj-modal-year { font-size:.82rem; color:var(--sand-dim); margin-bottom:2.5rem; padding-bottom:2rem; border-bottom:1px solid var(--border); }

    .proj-modal-content p { font-size:1rem; color:var(--sand-dim); line-height:1.95; margin-bottom:1.5em; }
    .proj-modal-content p strong { color:var(--sand); font-weight:400; }
    .proj-modal-content h3 { font-family:var(--font-s); font-size:1.25rem; color:var(--sand); font-weight:400; margin:2.5rem 0 .8rem; }
    .proj-modal-content .pm-img { width:100%; display:block; border:1px solid var(--border); border-radius:3px; margin:2rem 0; background:var(--charcoal); }
    .proj-modal-content .pm-img img { width:100%; display:block; border-radius:2px; }
    .proj-modal-content .pm-img.placeholder { aspect-ratio:16/7; display:flex; align-items:center; justify-content:center; font-size:.68rem; color:var(--sand-dim); text-transform:uppercase; letter-spacing:.12em; }
    .proj-modal-content .pm-caption { font-size:.75rem; color:var(--sand-dim); text-align:center; margin-top:-1.5rem; margin-bottom:2rem; font-style:italic; letter-spacing:.03em; }
    .proj-modal-content .pm-img-row { display:grid; grid-template-columns:1fr 1fr; gap:1rem; margin:2rem 0 .5rem; }
    .proj-modal-content .pm-img-row .pm-img { margin:0; }
    .proj-modal-content .pm-links { display:flex; flex-wrap:wrap; gap:.8rem; margin-top:2.5rem; padding-top:2rem; border-top:1px solid var(--border); }
    .proj-modal-content .pm-links a {
      color:var(--rust); font-weight:700; text-transform:uppercase;
      letter-spacing:.2em; font-size:.72rem; text-decoration:none;
      border:1px solid var(--rust-dim); padding:.5rem 1.2rem; border-radius:2px;
      transition:all .25s; min-height:44px; display:inline-flex; align-items:center;
    }
    .proj-modal-content .pm-links a:hover { background:var(--rust); color:#fff; border-color:var(--rust); }

    /* CONTACT MODAL */
    .modal-overlay { position:fixed; inset:0; background:rgba(22,18,14,.85); z-index:810; display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity .35s; }
    [data-theme="light"] .modal-overlay { background: rgba(200,190,175,.85); }
    .modal-overlay.active { opacity:1; pointer-events:all; }
    .modal { background:var(--bg2); border:1px solid var(--border); border-radius:4px; padding:2.8rem; width:90%; max-width:480px; max-height:90vh; max-height:90dvh; overflow-y:auto; -webkit-overflow-scrolling:touch; position:relative; transform:translateY(20px); transition:transform .35s cubic-bezier(.16,1,.3,1), background 0.4s ease; }
    .modal-overlay.active .modal { transform:none; }
    .modal-close { position:absolute; top:1.2rem; right:1.5rem; font-size:1.5rem; color:var(--sand-dim); background:none; border:none; min-width:44px; min-height:44px; display:flex; align-items:center; justify-content:center; }
    .modal h3 { font-family:var(--font-s); font-size:1.8rem; color:var(--sand); margin-bottom:.5rem; }
    .form-row { display:flex; flex-direction:column; gap:1rem; margin-bottom:1.2rem; }
    .form-row input, .form-row textarea { background:var(--charcoal); border:1px solid var(--border); padding:.8rem; color:var(--sand); font-family:var(--font-m); outline:none; border-radius:2px; font-size:16px; transition: background 0.4s ease, border-color 0.4s ease, color 0.4s ease; }
    .form-submit { width:100%; padding:1rem; background:var(--rust); color:#fff; border:none; font-family:var(--font-m); text-transform:uppercase; letter-spacing:.2em; border-radius:2px; font-size:16px; min-height:44px; }

    /* SECTIONS */
    .s-head { display:flex; align-items:baseline; gap:1.5rem; margin-bottom:5rem; }
    .s-title { font-family:var(--font-s); font-size:clamp(2.2rem,4vw,3.2rem); font-weight:400; color:var(--sand); line-height:1; }

    /* ABOUT */
    #about { padding:6rem 0; }
    .about-grid { display:grid; grid-template-columns:1fr 1.6fr; gap:clamp(3rem,8vw,8rem); align-items:start; }
    .about-location { font-size:1rem; color:var(--sand-dim); margin-bottom:2.5rem; }
    .about-stat { border-top:1px solid var(--border); padding:1.5rem 0; display:flex; flex-direction:column; gap:.2rem; transition: border-color 0.4s ease; }
    .about-stat-num { font-family:var(--font-s); font-size:2.5rem; color:var(--sand); line-height:1; }
    .about-right p { font-size:1.05rem; color:var(--sand-dim); line-height:1.9; margin-bottom:1.5em; }
    .about-right p strong { color:var(--sand); }
    .tags { display:flex; flex-wrap:wrap; gap:.6rem; margin-top:2.5rem; }
    .tag { font-size:.7rem; letter-spacing:.1em; text-transform:uppercase; padding:.4rem .9rem; border:1px solid var(--border); color:var(--sand-dim); transition:all .3s; min-height:36px; display:inline-flex; align-items:center; }
    .tag:hover { border-color:var(--rust); color:var(--rust); }

    /* PROJECTS GRID */
    #projects { padding:6rem 0; }
    .bubbles { display:grid; grid-template-columns:1fr 1fr; gap:1px; background:var(--border); border:1px solid var(--border); transition: background 0.4s ease, border-color 0.4s ease; }
    .bubbles.odd-count .bubble:first-child { grid-column:1 / -1; }
    .bubble { background:var(--bg); padding:2.5rem; transition:background .3s; position:relative; overflow:hidden; }
    .bubble:hover, .bubble:active { background:var(--bg2); }
    .bubble::after { content:''; position:absolute; bottom:0; left:0; right:0; height:2px; background:var(--rust); transform:scaleX(0); transition:transform .4s cubic-bezier(.16,1,.3,1); }
    .bubble:hover::after { transform:scaleX(1); }
    .b-thumb-ph { width:100%; background:var(--charcoal); margin-bottom:1.5rem; display:flex; align-items:center; justify-content:center; font-size:.7rem; color:var(--sand-dim); text-transform:uppercase; letter-spacing:.1em; border-radius:2px; overflow:hidden; transition: background 0.4s ease; }
    .b-thumb-ph:not(:has(img)) { aspect-ratio:16/7; }
    .b-thumb-ph img { width:100%; height:auto; display:block; }
    .b-title { font-family:var(--font-s); font-size:1.4rem; color:var(--sand); margin-bottom:.4rem; }
    .b-year { font-size:.8rem; color:var(--sand-dim); }

    /* EXPERIENCE */
    #cv { padding:6rem 0; }
    .cv-cols { display:grid; grid-template-columns:1fr 1fr; gap:5rem; }
    .cv-group-title { margin-bottom:0; padding-bottom:1rem; border-bottom:1px solid var(--border); transition: border-color 0.4s ease; }
    .tl-item { display:grid; grid-template-columns:110px 1fr; gap:2rem; padding:2rem 0; border-bottom:1px solid var(--border); transition: border-color 0.4s ease; }
    .tl-title { font-family:var(--font-s); font-size:1.25rem; color:var(--sand); margin-bottom:.4rem; line-height:1.3; }
    .tl-org { font-size:.95rem; color:var(--sand-dim); font-style:italic; margin-bottom:.5rem; }
    .tl-note { font-size:.95rem; color:var(--sand-dim); line-height:1.7; }

    .btn-rust, .btn-cv {
      display:inline-flex; align-items:center; justify-content:center;
      gap:.8rem; font-size:.8rem; letter-spacing:.2em; text-transform:uppercase;
      color:var(--sand); font-family:var(--font-m);
      border:1px solid var(--border); background:none; border-radius:0;
      transition:all .3s; min-width:260px; min-height:52px;
      padding:0 2rem; cursor:pointer; text-decoration:none;
    }
    .btn-rust:hover, .btn-cv:hover { background:var(--rust); color:#fff; border-color:var(--rust); }
    .btn-cv { margin-top:2rem; }

    /* CONTACT */
    #contact { padding:6rem 0 10rem; }
    .contact-inner { display:grid; grid-template-columns:1fr 1fr; gap:6rem; align-items:end; }
    .contact-left p { font-size:1.1rem; color:var(--sand-dim); margin-bottom:2.5rem; }
    .social-item { display:flex; justify-content:space-between; align-items:center; padding:1.5rem 0; border-bottom:1px solid var(--border); width:100%; background:none; border-top:none; border-left:none; border-right:none; color:var(--sand-dim); font-family:var(--font-m); font-size:1.1rem; text-align:left; min-height:56px; transition: color 0.3s, border-color 0.4s ease; }
    .social-item:first-child { border-top:1px solid var(--border); }
    .social-item:hover, .social-item:active { color:var(--sand); }

    footer { border-top:1px solid var(--border); padding:3rem clamp(2rem,5vw,5rem); display:flex; justify-content:space-between; flex-wrap:wrap; gap:1rem; transition: border-color 0.4s ease; }
    footer p { font-size:.8rem; color:var(--sand-dim); }

    .reveal { opacity:0; transform:translateY(30px); transition:all .8s cubic-bezier(.16,1,.3,1); }
    .reveal.in { opacity:1; transform:none; }
    @keyframes up { from{opacity:0;transform:translateY(30px)} to{opacity:1;transform:none} }

    /* MOBILE */
    @media (max-width:900px) {
      .wrap { padding:0 1.5rem; }
      .about-grid, .cv-cols, .contact-inner { grid-template-columns:1fr; gap:4rem; }
      .hero-inner { flex-direction:column-reverse; text-align:center; }
      .hero-eyebrow { letter-spacing:0.12em; font-size:0.68rem; text-align:center; }
      .hero-photo-wrap { width:clamp(200px,60vw,350px); }
      .bubbles { grid-template-columns:1fr; }
      .bubbles.odd-count .bubble:first-child { grid-column:1; }
      .bubble { padding:1.5rem; }
      .proj-modal-body { padding:1.5rem 1.25rem 2.5rem; }
      .proj-modal-content .pm-img-row { grid-template-columns:1fr; }
      .proj-nav { display:none; }
      .tl-item { grid-template-columns:80px 1fr; gap:1rem; }
      .s-head { flex-wrap:wrap; gap:.75rem; margin-bottom:3rem; }
      #contact { padding:4rem 0 6rem; }
      #themeToggle { top: 1rem; right: 1.5rem; }
    }
    @media (max-width:380px) {
      .tl-item { grid-template-columns:1fr; gap:.5rem; }
      .tl-date { font-size:.7rem; }
      .hero-name { font-size:clamp(3rem,18vw,4.5rem); }
    }
  </style>
</head>
<body>

<div id="cursor"></div>

<!-- THEME TOGGLE -->
<button id="themeToggle" aria-label="Toggle light/dark mode" title="Toggle theme">
  <!-- Sun icon (switch to light) -->
  <svg class="icon-sun" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--rust)">
    <circle cx="12" cy="12" r="4"/>
    <line x1="12" y1="2" x2="12" y2="5"/>
    <line x1="12" y1="19" x2="12" y2="22"/>
    <line x1="4.22" y1="4.22" x2="6.34" y2="6.34"/>
    <line x1="17.66" y1="17.66" x2="19.78" y2="19.78"/>
    <line x1="2" y1="12" x2="5" y2="12"/>
    <line x1="19" y1="12" x2="22" y2="12"/>
    <line x1="4.22" y1="19.78" x2="6.34" y2="17.66"/>
    <line x1="17.66" y1="6.34" x2="19.78" y2="4.22"/>
  </svg>
  <!-- Moon icon (switch to dark) -->
  <svg class="icon-moon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="color:var(--rust)">
    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
  </svg>
</button>

<!-- PROJECT MODAL -->
<div class="proj-overlay" id="projOverlay" onclick="overlayClick(event)">
  <button class="proj-nav prev" id="projPrev" onclick="navProj(-1)" aria-label="Previous">&#8592;</button>
  <button class="proj-nav next" id="projNext" onclick="navProj(+1)" aria-label="Next">&#8594;</button>
  <div class="proj-modal" id="projModal">
    <div class="proj-modal-header">
      <span class="proj-counter" id="projCounter"></span>
      <span class="proj-swipe-hint">← swipe →</span>
      <button class="proj-modal-close" onclick="closeProjModal()" aria-label="Close">&#x2715;</button>
    </div>
    <div class="proj-modal-body">
      <div class="proj-modal-tag"     id="projModalTag"></div>
      <div class="proj-modal-title"   id="projModalTitle"></div>
      <div class="proj-modal-year"    id="projModalYear"></div>
      <div class="proj-modal-content" id="projModalContent"></div>
    </div>
  </div>
</div>

<!-- CONTACT MODAL -->
<div class="modal-overlay" id="contactModal">
  <div class="modal">
    <button class="modal-close" onclick="closeModal()">×</button>
    <h3>Get in touch</h3>
    <form id="contactForm" action="https://formspree.io/f/YOUR_FORM_ID" method="POST" onsubmit="handleSubmit(event)">
      <div class="form-row">
        <input type="text"  name="name"    placeholder="Your name"    required />
        <input type="email" name="email"   placeholder="Your email"   required />
        <textarea name="message" rows="5"  placeholder="Your message" required></textarea>
      </div>
      <button class="form-submit" type="submit">Send Message</button>
    </form>
    <div id="formSuccess" style="display:none;text-align:center;padding-top:1rem;color:var(--rust);">
      Thanks for reaching out — I'll be in touch.
    </div>
  </div>
</div>

<!-- PAGE -->
<section id="hero">
  <div class="wrap">
    <div class="hero-inner">
      <div class="hero-main">
        <p class="hero-eyebrow">Data Scientist · Astrophysicist · Statistical Modelling · Algorithm Optimization · Data Engineering</p>
        <h1 class="hero-name">Nicolò <span>Dalmasso</span></h1>
      </div>
      <div class="hero-photo-wrap">
        <div class="hero-photo"><img src="images/ND_pic.jpg" alt="Nicolò Dalmasso"></div>
      </div>
    </div>
  </div>
</section>

<section id="about">
  <div class="wrap">
    <div class="s-head reveal"><span class="s-num">01</span><h2 class="s-title">About</h2></div>
    <div class="about-grid">
      <div class="about-left reveal">
        <p class="about-label">Based in</p>
        <p class="about-location">Melbourne, Australia</p>
        <div class="about-stat"><span class="about-stat-num">7</span><span class="about-stat-label">Peer-reviewed publications</span></div>
        <div class="about-stat"><span class="about-stat-num">5</span><span class="about-stat-label">First-author papers</span></div>
        <div class="about-stat"><span class="about-stat-num">4+</span><span class="about-stat-label">Quantitative research</span></div>
      </div>
      <div class="about-right reveal">
        <p>Astrophysicist turned data scientist, with a background in <strong>galaxy clustering</strong> and <strong>large-scale statistical modelling</strong>. I spent my PhD mapping the connection between massive galaxies and dark matter halos, then decided the Universe could wait and brought those skills somewhere with a shorter feedback loop.</p>
        <p>Now working on <strong>next-generation AI models</strong>, contributing to training data quality, evaluation frameworks, and the kind of analytical work that actually makes models less wrong.</p>
        <p>Outside of that: I cook obsessively, keep aquariums that are definitely too ambitious, lose sleep over <strong>Magic: The Gathering</strong>, and will drop everything for a <strong>remote trail, a long flight, or a campsite with no signal</strong>. If any of that sounds like your kind of person, get in touch.</p>
        <div class="tags">
          <span class="tag">Python</span><span class="tag">Bayesian Inference</span><span class="tag">MCMC</span><span class="tag">SQL</span><span class="tag">Docker</span><span class="tag">Git</span><span class="tag">ML</span><span class="tag">LLM Evaluation</span><span class="tag">ETL Pipelines</span><span class="tag">Data Visualization</span>
        </div>
      </div>
    </div>
  </div>
</section>

<section id="projects">
  <div class="wrap">
    <div class="s-head reveal"><span class="s-num">02</span><h2 class="s-title">Projects</h2></div>
    <p class="about-location">This is where I keep things. Research, side projects, work in progress. Updated as I go.</p>
    <div class="bubbles reveal" id="bubblesGrid"></div>
  </div>
</section>

<section id="cv">
  <div class="wrap">
    <div class="s-head reveal"><span class="s-num">03</span><h2 class="s-title">Experience</h2></div>
    <div class="cv-cols">
      <div class="reveal">
        <p class="cv-group-title">Work</p>
        <div class="tl">
          <div class="tl-item">
            <div class="tl-date">Sep 2025<br/>Present</div>
            <div>
              <div class="tl-title">LLM Training Specialist</div>
              <div class="tl-org">Mercor Intelligence</div>
              <div class="tl-note">Designing advanced STEM problems and evaluation frameworks to improve the reasoning capabilities of frontier AI models.</div>
            </div>
          </div>
          <div class="tl-item">
            <div class="tl-date">Mar 2022<br/>Sep 2025</div>
            <div>
              <div class="tl-title">Doctoral Researcher</div>
              <div class="tl-org">University of Melbourne</div>
              <div class="tl-note">Studied galaxy formation using JWST and Hubble data, building statistical pipelines and leading international collaborations.</div>
            </div>
          </div>
          <div class="tl-item">
            <div class="tl-date">Mar 2022<br/>Sep 2025</div>
            <div>
              <div class="tl-title">Teaching Assistant</div>
              <div class="tl-org">University of Melbourne</div>
              <div class="tl-note">Delivered tutorials in Physics and Astrophysics, and contributed to outreach programs.</div>
            </div>
          </div>
        </div>
      </div>
      <div class="reveal">
        <p class="cv-group-title">Education</p>
        <div class="tl">
          <div class="tl-item">
            <div class="tl-date">2022<br/>2025</div>
            <div><div class="tl-title">PhD in Physics — Astrophysics</div><div class="tl-org">University of Melbourne, AU</div></div>
          </div>
          <div class="tl-item">
            <div class="tl-date">2019<br/>2021</div>
            <div>
              <div class="tl-title">MSc in Astrophysics &amp; Theoretical Physics</div>
              <div class="tl-org">Università degli Studi di Torino, IT</div>
              <div class="tl-note">110/110 with distinction</div>
            </div>
          </div>
          <div class="tl-item">
            <div class="tl-date">2016<br/>2019</div>
            <div><div class="tl-title">BSc in Physics</div><div class="tl-org">Università degli Studi di Torino, IT</div></div>
          </div>
        </div>
      </div>
    </div>
    <div class="reveal">
      <a href="files/Nicolo_Dalmasso_CV.pdf" class="btn-cv" onclick="downloadCV(event)">Download Full CV</a>
    </div>
  </div>
</section>

<section id="contact">
  <div class="wrap">
    <div class="s-head reveal"><span class="s-num">04</span><h2 class="s-title">Contact</h2></div>
    <div class="contact-inner">
      <div class="contact-left reveal">
        <p>Always happy to talk science, data, or anything in between.</p>
        <button class="btn-rust" onclick="openModal()">Send a Message</button>
      </div>
      <div class="contact-right reveal">
        <button class="social-item" onclick="goLink('gh')">GitHub <span>Profile ↗</span></button>
        <button class="social-item" onclick="goLink('li')">LinkedIn <span>Profile ↗</span></button>
        <button class="social-item" onclick="goLink('gs')">Google Scholar <span>Publications ↗</span></button>
      </div>
    </div>
  </div>
</section>

<footer><p>© 2025 Nicolò Dalmasso</p></footer>

<script>
/* ── THEME TOGGLE ── */
const html = document.documentElement;

// Load saved preference, default to dark
const savedTheme = localStorage.getItem('theme') || 'dark';
html.setAttribute('data-theme', savedTheme);

document.getElementById('themeToggle').addEventListener('click', () => {
  const current = html.getAttribute('data-theme');
  const next = current === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', next);
  localStorage.setItem('theme', next);
});

/* ── CURSOR ── */
const isTouchDevice = window.matchMedia('(pointer: coarse)').matches;
const cur = document.getElementById('cursor');

function attachCursorListeners() {
  document.querySelectorAll('a, button, .bubble, .social-item, .btn-cv, .btn-rust, #themeToggle').forEach(el => {
    el.addEventListener('mouseenter', () => cur.classList.add('cursor-hover'));
    el.addEventListener('mouseleave', () => cur.classList.remove('cursor-hover'));
  });
}

if (!isTouchDevice) {
  document.addEventListener('mousemove', e => {
    cur.style.left = e.clientX + 'px';
    cur.style.top  = e.clientY + 'px';
  });
} else {
  cur.style.display = 'none';
}

/* ── REVEAL ── */
const obs = new IntersectionObserver(es => es.forEach(e => { if (e.isIntersecting) e.target.classList.add('in'); }), { threshold: .1 });
document.querySelectorAll('.reveal').forEach(el => obs.observe(el));

/* ── LINKS ── */
const links = {
  gh:               atob('aHR0cHM6Ly9naXRodWIuY29tL25kYWxtYXNzbw=='),
  li:               atob('aHR0cHM6Ly93d3cubGlua2VkaW4uY29tL2luL25pY29sby1kYWxtYXNzby8='),
  gs:               atob('aHR0cHM6Ly9zY2hvbGFyLmdvb2dsZS5jb20vY2l0YXRpb25zP3VzZXI9Tjl3clJuUUFBQUomaGw9ZW4='),
  acf_code:         atob('aHR0cHM6Ly9naXRodWIuY29tL25kYWxtYXNzby9hY2YtZ2FsYXh5LWNsdXN0ZXJpbmc='),
  spectra_fit_code: atob('aHR0cHM6Ly9naXRodWIuY29tL25kYWxtYXNzby9zcGVjdHJhLWZpdHRpbmc='),
  aria_code:        atob('aHR0cHM6Ly9naXRodWIuY29tL25kYWxtYXNzby9BUklBX0FkYXB0aXZlX1J1bm5pbmdfSW50ZWxsaWdlbnRfQXNzaXN0YW50'),
  p1: atob('aHR0cHM6Ly9hY2FkZW1pYy5vdXAuY29tL21ucmFzL2FydGljbGUvNTI4LzEvODk4Lzc0ODAyNTg='),
  p2: atob('aHR0cHM6Ly93d3cubmF0dXJlLmNvbS9hcnRpY2xlcy9zNDE1NTAtMDI0LTAyMjE4LTc='),
  p3: atob('aHR0cHM6Ly9hY2FkZW1pYy5vdXAuY29tL21ucmFzL2FydGljbGUvNTMzLzIvMjM5MS83NzM4Mzkw'),
  p4: atob('aHR0cHM6Ly9hY2FkZW1pYy5vdXAuY29tL21ucmFzL2FydGljbGUvNTMzLzQvNDQ3Mi83NzQ4NzU2'),
  p5: atob('aHR0cHM6Ly93d3cuYWFuZGEub3JnL2FydGljbGVzL2FhL2Ficy8yMDI1LzA3L2FhNTQ5NTQtMjUvYWE1NDk1NC0yNS5odG1s'),
  p6: atob('aHR0cHM6Ly9hY2FkZW1pYy5vdXAuY29tL21ucmFzL2FydGljbGUvNTQ2LzIvc3RhZzAwMS84NDE0MDUy'),
  p7: atob('aHR0cHM6Ly9hY2FkZW1pYy5vdXAuY29tL21ucmFzL2FydGljbGUvNTQ0LzIvMTkxNS84MzAwODA4')
};
function goLink(k)      { window.open(links[k], '_blank'); }
function openLink(e, k) { e.stopPropagation(); window.open(links[k], '_blank'); }

/* ── CV DOWNLOAD ── */
function downloadCV(e) {
  e.preventDefault();
  const url = 'files/Nicolo_Dalmasso_CV.pdf';
  fetch(url)
    .then(res => { if (!res.ok) throw new Error(); return res.blob(); })
    .then(blob => {
      const pdfBlob = new Blob([blob], { type: 'application/pdf' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(pdfBlob);
      a.download = 'Nicolo_Dalmasso_CV.pdf';
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(a.href);
    })
    .catch(() => window.open(url, '_blank'));
}

/* ═══════════════════════════════════════════════════════
   PROJECT DATA
   ═══════════════════════════════════════════════════════ */
const projects = [

  {
    tag:     'Galaxy Clustering · HST · JWST · 2022–2025',
    title:   'From HST to JWST: Pushing Galaxy Clustering to the Edge of the Observable',
    year:    'What Galaxy Clustering Really Tells Us About Dark Matter.',
    thumb:   'images/ACF_HOD.png',
    visible: true,
    content: `
      <p>· How far can we really push clustering measurements at high redshift?<br>· How deep can we go before the signal becomes uncertain?<br>· Can we meaningfully probe the faint end of the luminosity function?<br><br>This figure is the result of more than three years working on galaxy clustering in the early Universe. It brings together survey design, modelling, calibration and validation, moving from the depth of the <strong>Hubble Space Telescope (HST)</strong> to what the <strong>James Webb Space Telescope (JWST)</strong> now makes possible through a <strong>Halo Occupation Distribution (HOD)</strong> model.</p>
      <div class="pm-img"><img src="images/ACF_HOD.png"></div>
      <p class="pm-caption">Measured ACFs in the GOODS-S field at six mean redshifts. The blue line shows the HOD best fit, with one-halo and two-halo contributions separated. Magnitude thresholds and mean redshifts are indicated in each panel.</p>
      <h3>Galaxy Clustering!?</h3>
      <p>Imagine you walk into a pub and notice your group of friends has naturally gathered at one end of the bar, while another group has settled at the other. You are not randomly scattered around the room, you are <strong>clustered</strong>. Now zoom out to the scale of the Universe, swap people for galaxies, and swap the pub for hundreds of millions of light years of space. <strong>Galaxy clustering</strong> measures exactly that tendency: how strongly galaxies clump together beyond what pure chance would predict. The stronger the clustering signal, the more massive the <strong>dark matter halos</strong> those galaxies tend to live in, and the more we can infer about the <strong>cosmic scaffolding</strong> that pulled them together in the first place.</p>
      <p>The starting point was understanding how <strong>depth and completeness</strong> shape clustering measurements. Using HST data from the heterogeneous <strong>GOODS North and South</strong> fields, we developed a method to account for spatial variations when recovering <strong>high redshift candidates</strong>. This enabled consistent clustering measurements across non-uniform data, with particular attention to the <strong>faint end of the luminosity function</strong>.</p>
      <div style="text-align:center; margin: 2rem 0;"><img src="images/GOODSN_rms.png" style="width:60%; height:auto;"><p style="margin-top:0.5rem; font-size:0.9rem; color:#555;">Depth variations across the GOODS-North field.</p></div>
      <p>With the arrival of JWST, the question evolved. The same framework could now be pushed to <strong>fainter magnitudes and earlier cosmic times</strong>. The result was a clustering analysis capable of measuring <strong>galaxy bias beyond redshift z = 10</strong>, offering a direct view of structure formation when the Universe was less than <strong>a billion years old</strong>.</p>
      <div class="pm-img"><img src="images/ACF_ALL_app_mag_cut.png"></div>
      <p class="pm-caption">Angular correlation functions measured across six redshift bins with power law fits.</p>
      <h3>Key Results</h3>
      <p>The final step was a physical interpretation through an <strong>HOD model</strong> fitted to the latest JWST data. The clustering signal implies <strong>dark matter halo masses of 10¹¹ to 10¹² solar masses</strong> at redshift z = 7–11. Even at these early times, massive galaxies already appear to reside in <strong>substantial dark matter halos</strong>.</p>
      <div class="pm-img"><img src="images/fsat_beff_Mh_vs_z.png"></div>
      <p class="pm-caption">Evolution of satellite fraction, effective galaxy bias and characteristic halo mass with redshift.</p>
      <p>The ACF estimator used in this work is openly available on GitHub. Papers and code linked below.</p>
      <div class="pm-links">
        <a href="#" onclick="openLink(event,'p1')">HST Clustering paper →</a>
        <a href="#" onclick="openLink(event,'p3')">JWST Clustering paper →</a>
        <a href="#" onclick="openLink(event,'p6')">HOD Modelling paper →</a>
        <a href="#" onclick="openLink(event,'acf_code')">ACF Clustering code →</a>
      </div>`
  },

  {
    tag:     'ARIA · AI · ML · 2025',
    title:   'ARIA - Adaptive Running Intelligent Assistant',
    year:    "Your playlist doesn't know you're dying at kilometre three. ARIA does.",
    thumb:   'images/aria_recap.png',
    visible: true,
    content: `
      <p>Can a running app actually listen to you?<br>Spoiler: they can't. ARIA can.<br><br><strong>ARIA (Adaptive Running Intelligent Assistant)</strong> started as a question I kept asking while grinding through the same static playlist with a training plan that had absolutely no idea I was running on four hours of sleep. It turned into a small <strong>Python project</strong> to see if a coaching system could genuinely respond to you in real time, not just log your splits and move on.</p>
      <h3>The Problem with Running Apps</h3>
      <p>Despite the explosion of running apps and wearables, the core experience has barely changed. You are treated like a <strong>set of statistics</strong>. Playlists are fixed before you leave the door, training plans are built around <strong>population averages</strong> and have no idea how you feel at kilometre four, and when a session falls apart or goes better than expected there is no way for any of that to <strong>feed back</strong> into what happens next. Every run starts from the same baseline, regardless of what the last ten told you.</p>
      <p>Music is the piece that always felt the most wasted. There is solid evidence linking <strong>tempo, energy and BPM</strong> to <strong>perceived exertion and performance output</strong>, and yet every app treats it as background noise. A well-timed track at the right BPM can carry you through a hard interval better than any notification telling you to push harder. ARIA takes that seriously.</p>
      <h3>How ARIA Works</h3>
      <p>The idea is to build a coach that knows where you are <strong>right now</strong>, not where a plan assumed you would be. You start with a <strong>personal profile</strong>: basic stats feed into personalised <strong>heart rate zones</strong> and optimal <strong>BPM ranges</strong> for each training zone, so the system is grounded in your physiology from the start. From there, a <strong>music engine</strong> selects and swaps tracks based on BPM and energy level, matching your current zone and nudging intensity up or down as needed. The whole thing is held together by a <strong>real-time feedback loop</strong>: inputs signal whether you are pushing hard, struggling or comfortable, and ARIA adjusts both the training prescription and the music on the spot.</p>
      <div class="pm-img"><img src="images/aria_config.png"></div>
      <p class="pm-caption">Setup and pre-run planning. ARIA takes your runner profile and builds a personalised session, mapping training zones to musical BPM ranges that will guide workout intensity from the first step.</p>
      <div class="pm-img"><img src="images/aria_example_run.png"></div>
      <p class="pm-caption">Live adaptation in action. Real-time feedback triggers immediate adjustments to both training zone and music selection, responding to your actual state rather than a predetermined schedule.</p>
      <div class="pm-img"><img src="images/aria_recap.png"></div>
      <p class="pm-caption">Post-run feedback helps ARIA refine its understanding of your patterns and preferences, so each session informs the next.</p>
      <p>ARIA is a <strong>proof of concept</strong>, not a finished product. The kind of small project that exists to test whether an idea holds together. The answer is that it mostly does. <strong>BPM-matched music</strong> combined with <strong>real-time zone adaptation</strong> makes for a genuinely different feel compared to a fixed playlist and a rigid plan. The open question that sticks with me is how much of that comes from the science, and how much comes from simply <strong>feeling like something is paying attention</strong>.</p>
      <p>The full demo and code are on GitHub, linked below.</p>
      <div class="pm-links"><a href="#" onclick="openLink(event,'aria_code')">ARIA demo and code →</a></div>`
  },

  {
    tag:     'Spectroscopy · Spectrographs · JWST · 2025',
    title:   'Slit Loss Corrections in JWST Spectroscopy',
    year:    'NIRISS vs NIRSpec: A JWST Showdown.',
    thumb:   'images/spectra_niriss.png',
    visible: true,
    content: `
      <p>· Can one use both spectroscopic data from NIRISS and from NIRSpec?<br>· Are they the same even if the instruments are different?<br><br>These are two questions that arose while working with the <strong>GLASS (Grism Lens-Amplified Survey from Space)</strong> collaboration during my visit as a research student at UCLA (University of California, Los Angeles). We were in the process of creating the <strong>first spectroscopic NIRISS catalogue</strong>, and these questions came up naturally. It was the perfect occasion to delve into them with a dedicated project, led by me.</p>
      <div class="pm-img"><img src="images/all_cutouts.png"></div>
      <p class="pm-caption">NIRISS imaging cutouts of the 12 galaxies in our sample. White contours show the segmentation maps, magenta and white rectangles mark the NIRSpec slits, and the "A" parameter in each panel indicates the fraction of the segmentation map covered by the slit. Objects span redshifts z = 1.27–3.38 and are classified as compact or extended based on their flux distribution relative to the slit geometry.</p>
      <h3>NIRISS and NIRSpec</h3>
      <p><strong>JWST (James Webb Space Telescope)</strong> offers two complementary spectroscopic modes for studying distant galaxies. <strong>NIRISS WFSS</strong> disperses light across the entire field of view without spatial constraints, capturing the integrated emission from each galaxy's full morphological extent. <strong>NIRSpec MSA</strong> instead isolates individual targets through a micro-shutter array, with each slit measuring just <strong>0.2 × 0.46 arcsec</strong>, enabling simultaneous multi-object spectroscopy with minimised sky background and high spectral resolution.</p>
      <p>Both instruments are exceptional, but they work in <strong>fundamentally different ways</strong> and that difference matters. A slit can miss light. A slitless instrument cannot. To find out how much, we selected <strong>12 spectroscopically confirmed galaxies</strong> from the <strong>Abell 2744</strong> cluster field spanning <strong>redshifts z = 1.27–3.38</strong> and measured strong emission lines independently with both instruments.</p>
      <h3>The Problem with Slits</h3>
      <p>When a narrow slit is placed over a galaxy, it only captures the light that falls within its footprint. For <strong>extended sources</strong>, a significant fraction of the emission lands outside the slit and is simply lost. These are called <strong>slit losses</strong>, and their quantitative impact when combining JWST's slitless and slit-based modes <strong>had not been systematically characterised before this work</strong>.</p>
      <div class="pm-img"><img src="images/spectra_niriss.png"></div>
      <p class="pm-caption">Example analysis for galaxy NIRISS ID 2744 at z = 1.86. Top right: the NIRISS spectrum (blue), original NIRSpec spectrum (gray), and NIRSpec convolved to match NIRISS resolution (red), with identified emission lines marked.</p>
      <h3>Key Results</h3>
      <p>The analysis revealed a clear <strong>morphology-dependent dichotomy</strong>. Compact sources showed consistent flux measurements between instruments, agreeing within <strong>1σ uncertainties</strong>. Extended sources behaved very differently: NIRISS systematically measured higher integrated fluxes, a direct signature of <strong>slit losses</strong> visible across all emission lines and all three observing programs.</p>
      <p>When the NIRSpec slit covered more than <strong>15% of the galaxy's segmentation map area</strong>, NIRSpec recovered <strong>at least 63% of the NIRISS flux</strong>. For lower coverage fractions, that recovery dropped to anywhere between <strong>24% and 63%</strong> — a factor of four difference in the most extreme cases.</p>
      <div class="pm-img"><img src="images/flux_ratio_vs_restwave.png"><img src="images/flux_ratio_vs_area.png"></div>
      <p class="pm-caption">NIRSpec-to-NIRISS flux ratio as a function of rest-frame wavelength (top) and slit coverage fraction (bottom), with compact sources in blue and extended in red.</p>
      <p>The emission line fitting pipeline behind this analysis is openly available on GitHub. Papers and code linked below.</p>
      <div class="pm-links">
        <a href="#" onclick="openLink(event,'p7')">Slit losses paper →</a>
        <a href="#" onclick="openLink(event,'spectra_fit_code')">Spectra fitting code →</a>
      </div>`
  },

  {
    tag:     'Spectroscopy · Catalog · JWST · 2025',
    title:   'NIRISS Spectroscopic Catalog',
    year:    'The first NIRISS spectroscopic catalogue. 488 redshifts. One cluster. The whole early Universe in a single field.',
    thumb:   'images/niriss_beams_example_rev1.png',
    visible: true,
    content: `
      <p>· What does it take to build a spectroscopic catalogue from scratch?<br>· How do you extract reliable redshifts from a crowded, contaminated field?<br><br>These questions sat at the heart of this project, led by <a href="https://orcid.org/0000-0003-3108-0624" target="_blank" style="color:var(--rust);">Peter J. Watson</a> and carried out within the <strong>GLASS (Grism Lens-Amplified Survey from Space)</strong> collaboration, of which I am a member.<br>The goal: build the <strong>first ever NIRISS spectroscopic redshift catalogue</strong> for the Abell 2744 cluster field, using data from the <strong><a href="https://archive.stsci.edu/hlsp/glass-jwst" target="_blank" style="color:var(--rust);">GLASS-JWST Early Release Science (ERS)</a></strong> programme.</p>
      <div class="pm-img"><img src="images/pointings_rev1.png"></div>
      <p class="pm-caption">All JWST spectroscopic observations covering the Abell 2744 field, with the NIRISS footprint shown as a solid line.</p>
      <h3>Pandora's Cluster</h3>
      <p><strong>Abell 2744</strong>, nicknamed Pandora's Cluster, is one of the most studied patches of sky in existence. It is a massive gravitational lens, bending and magnifying the light of galaxies billions of light years behind it, effectively giving us a natural telescope pointed at the early Universe. JWST stared at it with NIRISS in <strong>WFSS</strong> mode — an instrument configuration that disperses the light of every single object in the field at once, no target selection, no slits, just everything, simultaneously.</p>
      <p>The catch is that every spectrum overlaps with every other. In a field this crowded, separating signal from contamination is genuinely hard. It required careful <strong>contamination modelling</strong>, custom <strong>source detection</strong> designed around the diffuse <strong>ICL (Intracluster Light)</strong> of the cluster itself, and a multi-stage <strong>visual inspection</strong> where every extracted spectrum was reviewed by multiple team members. I contributed to the analysis and validation of the spectra and redshifts throughout this pipeline.</p>
      <div class="pm-img"><img src="images/niriss_beams_example_rev1.png"></div>
      <p class="pm-caption">A galaxy at z = 1.891, dispersed in two orthogonal directions. The asymmetric shape of the galaxy produces a noticeably different spectrum at each orientation, with contamination from nearby sources visible throughout.</p>
      <h3>The Catalogue</h3>
      <p>The result is <strong>488 spectroscopic redshifts</strong>, 354 of them secure, spanning <strong>z = 0.1 to z = 8.2</strong>. Of those, <strong>245 are entirely new</strong>, never measured before. The catalogue also includes the first spectroscopic confirmation of a <strong>triply imaged galaxy at z = 2.653</strong>, and the identification of four <strong>background overdensities</strong> at z = 1.10, 1.34, 1.87, and 2.65.</p>
      <div class="pm-img"><img src="images/od_source_plane_subplots_rev1.png"></div>
      <p class="pm-caption">The four overdensities reconstructed in the source plane, showing where these galaxy groups actually sit once the lensing distortion of the cluster is accounted for.</p>
      <h3>Tools Released to the Community</h3>
      <p>Two open-source tools came out of this work. <strong>pygcg</strong> is an interactive GUI for browsing and classifying grism spectra. <strong>pygrife</strong> allows re-extraction of any region in pre-processed grism data without rebuilding the contamination model from scratch. Both are already being used beyond this project.</p>
      <p>Paper linked below.</p>
      <div class="pm-links"><a href="#" onclick="openLink(event,'p5')">NIRISS catalogue paper →</a></div>`
  },

  {
    tag:     'Galaxy Mergers · NIRCam · JWST · 2024',
    title:   'Galaxy Mergers Across 13 Billion Years of Cosmic History',
    year:    'One in ten galaxies is colliding right now. That number has not changed since the dawn of time.',
    thumb:   'images/merger_vs_nonmerger_hres_mu2.0_v2.png',
    visible: true,
    content: `
      <p>
          · Do galaxies collide?<br>
          · How often does it happen, and does it change over cosmic time?<br><br>

          These are some of the oldest questions in extragalactic astronomy, and answering them requires
          being able to actually see what a <strong>merging galaxy</strong> looks like across billions of years of cosmic history.
          This is a first-author project where I used <strong>JWST NIRCam (Near Infrared Camera)</strong> imaging to study
          galaxy mergers from redshift z = 4 all the way to z = 9, pushing the analysis deep into
          the <strong>epoch of reionization</strong>, when the Universe was less than 1.5 billion years old.
      </p>

      <div class="pm-img"><img src="images/merger_vs_nonmerger_hres_mu2.0_v2.png"></div>
      <p class="pm-caption">
          Mergers versus non-mergers across five redshift bins. Each stamp is 2.2 arcsec on a side.
          Upper row: isolated galaxies. Lower row: merger candidates, identified from their morphological parameters.
      </p>

      <h3>How Do You Spot a Merger?</h3>
      <p>
          When two galaxies collide, they do not pass through each other cleanly. They distort, stretch, and
          asymmetrically redistribute their light in ways that leave measurable signatures in the image.
          We quantified this using three <strong>morphological parameters</strong>: the <strong>Gini coefficient (G)</strong>,
          which measures how unevenly light is distributed across a galaxy; the <strong>second-order moment of
          brightness (M₂₀)</strong>, which tracks how concentrated the brightest regions are; and the
          <strong>asymmetry (A)</strong>, which captures how different a galaxy looks when you rotate it 180 degrees.
          Together these three numbers can tell you, with reasonable confidence, whether what you are
          looking at is a galaxy mid-collision or just going about its business undisturbed.
      </p>
      <p>
          We applied this to a parent sample of <strong>675 galaxies</strong> in the low-magnification outskirts of
          <strong>Abell 2744</strong>, drawn from three JWST programs: <strong>GLASS-ERS (PID 1324)</strong>,
          <strong>UNCOVER (PID 2561)</strong>, and <strong>DDT-2756</strong>. To avoid measuring shapes distorted by
          gravitational lensing from the foreground cluster, we excluded any region with magnification
          <strong>μ ≥ 2.0</strong>. What remained was a clean, high-resolution view of real galaxy morphologies
          across five billion years of cosmic time.
      </p>

      <div class="pm-img"><img src="images/fm_GS_G_vs_z_magnitude_and_mass_cut_hres_mu2.0.png"></div>
      <p class="pm-caption">
          Merger fraction as a function of redshift for the Silver (left) and Gold (right) samples,
          split by luminosity (top) and stellar mass (bottom). The Gold sample sits stable around f_m = 0.11 across the full redshift range.
      </p>

      <h3>Key Results</h3>
      <p>
          From our stricter <strong>Gold sample</strong>, requiring both a disturbed light distribution and
          significant asymmetry, we identified <strong>64 merger candidates</strong> and measured a
          <strong>merger fraction of f_m = 0.11 ± 0.04</strong>. That number does not change with redshift.
          Not at z = 4, not at z = 9. The merger fraction is <strong>flat across the entire epoch of reionization</strong>,
          extending a trend previously seen only out to z ≈ 6 and now pushed back to when the Universe
          was just half a billion years old.
      </p>
      <p>
          Why would it be flat? The merger rate itself actually increases with redshift, galaxies were
          colliding more frequently in the early Universe. But at the same time, those early galaxies were
          smaller and denser, so mergers completed faster. The two effects cancel out almost perfectly,
          leaving the <strong>observed fraction roughly constant</strong> at around 10% across cosmic time.
          We also checked whether merging galaxies form stars faster than isolated ones. The answer,
          perhaps surprisingly, is no, at least not in any statistically significant way,
          suggesting that in the early Universe, <strong>smooth gas accretion</strong> dominates star formation
          rather than merger-driven bursts.
      </p>

      <div class="pm-img"><img src="images/fm_vs_z_comparison_noncolorblind.png"></div>
      <p class="pm-caption">
          Our Gold sample result (red star) compared against merger fraction measurements from the literature
          spanning z = 0 to z = 9. Our result is consistent with the flat trend seen at lower redshifts,
          now extended deep into the epoch of reionization.
      </p>

      <p>
          One in ten galaxies, at any point in the history of the Universe, appears to be in the middle
          of a collision. That turns out to be a remarkably stable number.
      </p>

      <p>
          Paper linked below.
      </p>

      <div class="pm-links">
          <a href="#" onclick="openLink(event,'p4')">Galaxy mergers paper →</a>
      </div>
      `
  }

];

/* ── BUILD BUBBLES ── */
const bubblesEl = document.getElementById('bubblesGrid');
const visibleProjects = projects.map((p, i) => ({ ...p, idx: i })).filter(p => p.visible);

visibleProjects.forEach(p => {
  const thumbHtml = p.thumb
    ? `<div class="b-thumb-ph"><img src="${p.thumb}"></div>`
    : `<div class="b-thumb-ph"></div>`;
  const div = document.createElement('div');
  div.className = 'bubble';
  div.setAttribute('role', 'button');
  div.setAttribute('tabindex', '0');
  div.onclick = () => openProj(p.idx);
  div.onkeydown = (e) => { if (e.key === 'Enter' || e.key === ' ') openProj(p.idx); };
  div.innerHTML = `${thumbHtml}<div class="b-tag">${p.tag}</div><div class="b-title">${p.title}</div>${p.year ? `<div class="b-year">${p.year}</div>` : ''}`;
  bubblesEl.appendChild(div);
});

if (visibleProjects.length % 2 !== 0) bubblesEl.classList.add('odd-count');

/* Attach cursor listeners after bubbles are built */
if (!isTouchDevice) attachCursorListeners();

/* ── MODAL LOGIC ── */
let currentVisibleIdx = 0;

function openProj(idx) {
  currentVisibleIdx = visibleProjects.findIndex(p => p.idx === idx);
  renderProj();
  document.getElementById('projOverlay').classList.add('active');
  document.body.style.overflow = 'hidden';
}

function renderProj() {
  const p = visibleProjects[currentVisibleIdx];
  document.getElementById('projCounter').textContent    = `${currentVisibleIdx + 1} / ${visibleProjects.length}`;
  document.getElementById('projModalTag').textContent   = p.tag;
  document.getElementById('projModalTitle').textContent = p.title;
  document.getElementById('projModalYear').textContent  = p.year;
  document.getElementById('projModalContent').innerHTML = p.content;
  document.getElementById('projPrev').disabled = (currentVisibleIdx === 0);
  document.getElementById('projNext').disabled = (currentVisibleIdx === visibleProjects.length - 1);
  document.getElementById('projModal').scrollTop = 0;
}

function navProj(dir) {
  const n = currentVisibleIdx + dir;
  if (n < 0 || n >= visibleProjects.length) return;
  currentVisibleIdx = n;
  renderProj();
}

function closeProjModal() {
  document.getElementById('projOverlay').classList.remove('active');
  document.body.style.overflow = '';
}
function overlayClick(e) {
  if (e.target === document.getElementById('projOverlay')) closeProjModal();
}

document.addEventListener('keydown', e => {
  if (!document.getElementById('projOverlay').classList.contains('active')) return;
  if (e.key === 'Escape')     closeProjModal();
  if (e.key === 'ArrowLeft')  navProj(-1);
  if (e.key === 'ArrowRight') navProj(+1);
});

/* ── SWIPE TO NAVIGATE PROJECTS (mobile) ── */
let touchStartX = 0;
let touchStartY = 0;
let swipeHandled = false;
let swipeLocked  = false;

const projModal = document.getElementById('projModal');

projModal.addEventListener('touchstart', e => {
  touchStartX  = e.touches[0].clientX;
  touchStartY  = e.touches[0].clientY;
  swipeHandled = false;
  swipeLocked  = false;
}, { passive: true });

projModal.addEventListener('touchmove', e => {
  if (swipeLocked) return;
  const dx = e.touches[0].clientX - touchStartX;
  const dy = e.touches[0].clientY - touchStartY;
  if (Math.abs(dx) > 8 || Math.abs(dy) > 8) {
    swipeLocked = true;
    if (Math.abs(dx) > Math.abs(dy) * 1.2) {
      e.preventDefault();
    }
  }
}, { passive: false });

projModal.addEventListener('touchend', e => {
  if (swipeHandled) return;
  const dx = e.changedTouches[0].clientX - touchStartX;
  const dy = e.changedTouches[0].clientY - touchStartY;
  if (Math.abs(dx) > 50 && Math.abs(dx) > Math.abs(dy) * 1.5) {
    swipeHandled = true;
    if (dx < 0) navProj(+1);
    else        navProj(-1);
  }
}, { passive: true });

/* ── CONTACT MODAL ── */
function openModal()  { document.getElementById('contactModal').classList.add('active');    document.body.style.overflow = 'hidden'; }
function closeModal() { document.getElementById('contactModal').classList.remove('active'); document.body.style.overflow = ''; }

async function handleSubmit(e) {
  e.preventDefault();
  try {
    const res = await fetch(e.target.action, { method: 'POST', body: new FormData(e.target), headers: { 'Accept': 'application/json' } });
    if (res.ok) { e.target.style.display = 'none'; document.getElementById('formSuccess').style.display = 'block'; }
  } catch { alert('Error sending message.'); }
}
</script>
</body>
</html>
